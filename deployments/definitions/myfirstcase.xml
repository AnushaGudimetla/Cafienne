<definitions>
    <caseFileItemDefinition definitionType="http://www.omg.org/spec/CMMN/DefinitionType/Unspecified" name="permit">
        <property name="Name" type="http://www.omg.org/spec/CMMN/PropertyType/string" />
        <property name="Zipcode" type="http://www.omg.org/spec/CMMN/PropertyType/string" />
        <property name="HouseNumber" type="http://www.omg.org/spec/CMMN/PropertyType/integer" />
        <property name="HouseNumberAddition" type="http://www.omg.org/spec/CMMN/PropertyType/string" />
        <property name="LicensePlate" type="http://www.omg.org/spec/CMMN/PropertyType/string" />
    </caseFileItemDefinition>
    <caseFileItemDefinition definitionType="http://www.omg.org/spec/CMMN/DefinitionType/Unspecified" name="approval">
        <property name="ApprovedBy" type="http://www.omg.org/spec/CMMN/PropertyType/string" />
        <property name="ApprovalTimestamp" type="http://www.omg.org/spec/CMMN/PropertyType/string" />
        <property name="Motivation" type="http://www.omg.org/spec/CMMN/PropertyType/string" />
        <property name="Status" type="http://www.omg.org/spec/CMMN/PropertyType/string" />
    </caseFileItemDefinition>
    <case description="" id="myfirstcase.case.case_MyFirstCase" name="MyFirstCase">
        <caseFileModel>
            <caseFileItem definitionRef="permit" id="cfi_csajp_1" multiplicity="ExactlyOne" name="permit" />
            <caseFileItem definitionRef="approval" id="cfi_csDLE_1" multiplicity="ExactlyOne" name="approval" />
        </caseFileModel>
        <casePlanModel id="cm_MyFirstCase.case_MyFirstCase_0" name="MyFirstCase">
            <planItem definitionRef="pid_cm_csdrg_4" id="cm_csdrg_4" name="View application" />
            <humanTask humanTaskRef="viewapplication.humantask" id="pid_cm_csdrg_4" isBlocking="true" name="View application">
                <inputs bindingRef="cfi_csajp_1" id="inTP_cm_cs26w_8_0" name="permit" />
                <extensionElements mustUnderstand="false" xmlns:cafienne="org.cafienne">
                    <parameterMapping id="inPM_cm_cs50m_12_0" sourceRef="inTP_cm_cs26w_8_0" targetRef="permit" />
                    <cafienne:implementation class="org.cafienne.cmmn.definition.task.WorkflowTaskDefinition" xmlns:cafienne="org.cafienne">
                        <input id="permit" name="permit" />
                        <task-model>
{
  "schema":{
    "title": "Parking Permit",
    "type": "object",
    "properties":{
      "permit":{
      "title": "Applicant details",
      "type": "object",
      "properties": {
        "Name":{
        	"type": "string",
        	"title": "Your name"
      },
      	"Zipcode":{
        	"type": "string",
        	"title": "Zipcode"
      },
      	"HouseNumber":{
       		"type": "integer",
        	"title": "House number"
      },
     	 "HouseNumberAddition":{
       		"type": "string",
        	"title": "House number addition"
      },
     	 "LicensePlate":{
       		"type": "string",
       	 	"title": "License plate"
      }
      }
    }
    }
  },
       "uiSchema":{
        	"permit":{
        		"ui:widget": "textrea",
   				"ui:order": ["Name", "Zipcode", "HouseNumber", "HouseNumberAddition", "LicensePlate"]
        			}
        		}
           } 
        </task-model>
                    </cafienne:implementation>
                </extensionElements>
            </humanTask>
            <planItem definitionRef="pid_cm_csDLE_16" id="cm_csDLE_16" name="Decide on application" />
            <humanTask humanTaskRef="decideonapplication.humantask" id="pid_cm_csDLE_16" isBlocking="true" name="Decide on application">
                <inputs bindingRef="cfi_csajp_1" id="inTP_cm_csDLE_16_0" name="permit" />
                <outputs bindingRef="cfi_csDLE_1" id="outTP_cm_csDLE_16_0" name="approval" />
                <extensionElements mustUnderstand="false" xmlns:cafienne="org.cafienne">
                    <parameterMapping id="inPM_cm_csQgJ_6_0" sourceRef="inTP_cm_csDLE_16_0" targetRef="permit" />
                    <parameterMapping id="outPM_cm_csQgJ_6_0" sourceRef="approval" targetRef="outTP_cm_csDLE_16_0" />
                    <cafienne:implementation class="org.cafienne.cmmn.definition.task.WorkflowTaskDefinition" xmlns:cafienne="org.cafienne">
                        <input id="permit" name="permit" />
                        <output id="approval" name="approval" />
                        <task-model>
      {
  "schema":{
    "title": "",
    "type": "object",
    "properties":{
  		"permit": {"$ref": "#/definitions/permit"},
  		"approval": {"$ref": "#/definitions/approval"}
  },
      "definitions":{
  		"permit":{
  			"title": "Applicant details",
      		"type": "object",
      		"properties": {
       			 "Name":{
        			"type": "string",
        			"title": "Your name"
   				},
		      	"Zipcode":{
    		    	"type": "string",
       			 	"title": "Zipcode"
   				},
      			"HouseNumber":{
       				"type": "integer",
        			"title": "House number"
 		 		},
     			 "HouseNumberAddition":{
       				"type": "string",
        			"title": "House number addition"
     	 		},
     	 		"LicensePlate":{
       				"type": "string",
       	 			"title": "License plate"
    			}
     	}
  },
				"approval": {
                	  "title": "Approval",
         	         "type": "object",
  					"required": ["Status", "ApprovedBy"],
           	       "properties": {
           	           "Status": {
           	               "title": "Approval status",
           	               "type": "string"
           	           },
           	           "ApprovedBy": {
           	               "title": "Approved by",
           	               "type": "string"
           	           },
           	           "ApprovalTimestamp": {
           	               "title": "Approval date",
  							"type": "string",
           	               "format": "date",
  							"default": "$today" 
           	           },
           	           "Motivation": {
           	               "title": "Motivation",
           	               "type": "string"
           	           }
                  }
  }
  }
  },
       "uiSchema":{
  			"ui:order": ["permit", "approval"],
        	"permit":{
        		"ui:widget": "textarea",
  				"ui:readonly": true,
  				"ui:order": ["Name", "Zipcode", "HouseNumber", "HouseNumberAddition", "LicensePlate"]
  					},
  			 "approval" : {
         	   "Status": {
         	       "ui:widget": "radio",
        	        "options": {
        	            "Approved": "approved",
        	            "Rejected": "rejected  "
         	       }
        	    },
            "ApprovedBy": {"ui:widget": "user-selector", "multiSelect" : false},
            "ApprovalTimestamp" : {
              "ui:readonly": true
          }
      }
  }
  }
  </task-model>
                    </cafienne:implementation>
                </extensionElements>
            </humanTask>
        </casePlanModel>
        <input bindingRef="cfi_csajp_1" id="csajp_inCPs_0" name="permit" />
        <extensionElements>
            <cafienne:start-case-model xmlns:cafienne="org.cafienne">{
  "schema":{
    "title": "Request parking permit",
    "type": "object",
    "properties":{
      "permit":{
      "title": " ",
      "type": "object",
      "required": ["Name", "Zipcode", "HouseNumber","LicensePlate"],
      "properties": {
        "Name":{
        	"type": "string",
        	"title": "Your name"
      },
      	"Zipcode":{
        	"type": "string",
        	"title": "Zipcode"
      },
      	"HouseNumber":{
       		"type": "integer",
        	"title": "House number"
      },
     	 "HouseNumberAddition":{
       		"type": "string",
        	"title": "House number addition"
      },
     	 "LicensePlate":{
       		"type": "string",
       	 	"title": "License plate"
      }
      }
    }
    }
  },
  "uiSchema":{
    	"permit":{
          	"Name":{ 
        	"ui:autofocus": true
       			}
  }
}
}
            </cafienne:start-case-model>
        </extensionElements>
    </case>
    <CMMNDI>
        <CMMNDiagram>
            <CMMNShape cmmnElementRef="cm_MyFirstCase.case_MyFirstCase_0" name="MyFirstCase">
                <Bounds height="748" width="781" x="17" y="11" />
            </CMMNShape>
            <CMMNShape cmmnElementRef="cm_csdrg_4" name="View application">
                <Bounds height="60" width="100" x="48" y="97" />
            </CMMNShape>
            <CMMNShape cmmnElementRef="cm_csDLE_16" name="Decide on application">
                <Bounds height="60" width="151" x="196" y="97" />
            </CMMNShape>
        </CMMNDiagram>
    </CMMNDI>
</definitions>
